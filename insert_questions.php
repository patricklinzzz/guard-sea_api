<?php
// 引入資料庫連線
require_once('./common/cors.php');
require_once('./common/conn.php');

// 準備要插入的資料
// 這裡將你的所有 INSERT 語句轉換為一個二維陣列
$questions = [
    // quiz_id 1
    [1, '氣候變遷如何威脅綠蠵龜的族群平衡？', '改變其覓食地點', '增加牠們的天敵數量', '影響孵化溫度，導致性別失衡', 3, '巢穴溫度升高會導致雌龜比例過高，影響族群繁衍。'],
    [1, '海獺的何種特徵使其特別易受石油污染的危害？', '皮毛不防水，靠空氣層保暖', '牠們的食物來源單一', '牠們游泳速度緩慢', 1, '石油破壞海獺皮毛的隔熱層，導致失溫死亡。'],
    [1, '皇帝企鵝瀕危風險增加，主因是氣候變遷導致的什麼？', '繁殖海冰融化', '海水酸化加劇', '食物短缺', 1, '穩固的海冰是皇帝企鵝繁殖的關鍵棲地，融化直接威脅牠們的存續。'],
    [1, '蘇眉魚族群難以從捕撈中恢復，主因是其何種特性？', '壽命短、繁殖快', '食物來源單一', '生長緩慢、性成熟晚', 3, '蘇眉魚生長慢且性成熟晚，導致被捕後族群難以補充。'],
    [1, '鋸鰩的何種獨特身體部位使其成為漁業混獲的主要受害者？', '鋸狀吻部', '尖銳的背鰭', '扁平的身體', 1, '其鋸狀吻部極易纏繞漁網，造成意外捕獲。'],
    [1, '綠蠵龜受塑膠垃圾威脅，主因常是？', '塑膠改變海水鹽度', '誤食塑膠袋或被漁網纏繞', '塑膠增加海底沉積物', 2, '海龜常將塑膠誤認為食物吞食，或被廢棄漁具纏繞窒息。'],
    [1, '海獺數量曾因皮毛貿易銳減，其回歸如何有助於生態系統恢復？', '清理海底垃圾', '增加海水含氧量', '控制海膽數量，恢復海帶森林', 3, '海獺作為基石物種，控制海膽數量有助於海帶森林復甦。'],
    [1, '除棲地喪失外，氣候變遷如何加劇皇帝企鵝食物短缺？', '影響磷蝦等主要食物來源分佈', '導致海水污染', '增加競爭物種', 1, '氣候變遷影響南極海冰，進而衝擊磷蝦等食物供應。'],
    [1, '蘇眉魚族群驟減，除過度捕撈外，主要因何種漁法？', '釣竿漁業', '氰化物或炸魚等破壞性漁法', '傳統魚籠捕撈', 2, '活魚貿易中常使用的破壞性漁法對蘇眉魚造成致命打擊。'],
    [1, '鋸鰩在IUCN紅色名錄中的最高瀕危等級是什麼？', '瀕危 (EN)', '易危 (VU)', '極危 (CR)', 3, '極危（CR）代表鋸鰩在野外面臨極高的滅絕風險。'],

    // quiz_id 2
    [2, '哪種污染物是海洋中最常見且持久的，對海洋生態造成廣泛威脅？', '有機廢物', '塑膠垃圾', '玻璃碎片', 2, '塑膠因其極難分解的特性，是海洋中最主要的污染物。'],
    [2, '微塑膠如何對海洋生物造成主要危害？', '改變海水鹽度，使其無法生存', '被誤食後積聚體內並釋放毒素', '阻礙陽光穿透水面影響浮游生物', 2, '微塑膠常被海洋生物誤認為食物，進入體內後會造成消化阻塞，並可能釋放有害化學物質。'],
    [2, '來自農業徑流的過量營養物質（如氮和磷）流入海洋會導致什麼現象？', '提升海水透明度', '引發藻華（赤潮）並形成缺氧區', '加速珊瑚礁生長', 2, '過量營養物質會引發藻類大量繁殖，藻類死亡分解後消耗水中氧氣，形成對海洋生物致命的「死亡區」。'],
    [2, '除了大型油輪洩漏，哪項是海洋石油污染最常見但卻經常被忽視的來源？', '海底火山爆發', '陸地徑流、城市污水和日常船隻運作', '深海探勘地震', 2, '雖然油輪洩漏影響巨大，但陸地徑流、城市污水和日常航運船隻的廢油排放，是持續且累積性更強的石油污染源。'],
    [2, '「幽靈漁具」對海洋環境的威脅是什麼？', '它們會發出噪音干擾海洋生物', '是廢棄或遺失的漁具，在海中持續捕殺生物', '它們會吸收海水中的氧氣', 2, '被遺棄的漁網和漁線會持續在海中「捕魚」，造成大量海洋生物的意外死亡。'],
    [2, '船隻、聲納等產生的人為海洋噪音，如何主要影響海洋生物？', '加速水流，有助於浮游生物移動', '干擾其溝通、覓食、導航和繁殖', '吸引新的物種進入該區域', 2, '海洋噪音會干擾鯨魚、海豚等依賴聲音溝通和導航的海洋哺乳動物，使其迷失方向、壓力增加，甚至導致擱淺。'],
    [2, '全球海洋中絕大部分的塑膠垃圾最終來源於哪裡？', '海上鑽油平台與航運活動', '來自陸地的垃圾和廢物', '海底火山噴發物', 2, '約八成的海洋塑膠垃圾是透過河流、海岸線丟棄和風力等從陸地進入海洋的。'],
    [2, '作為個人，哪項行動最能有效減少塑膠污染對海洋的衝擊？', '鼓勵製造更多塑膠製品', '減少使用一次性塑膠產品', '將所有垃圾焚燒處理', 2, '「減量」是解決塑膠污染最直接有效的方法，包括自帶環保袋、水瓶和餐具。'],
    [2, '重金屬和持久性有機污染物（如DDT）等化學物質，如何對海洋生物造成危害？', '作為食物來源被消化吸收', '在生物體內累積，並沿著食物鏈傳遞', '增加海洋生物的繁殖率', 2, '這些化學污染物會在海洋生物體內累積，沿著食物鏈傳遞，對高階捕食者造成嚴重毒害，甚至影響人類健康。'],
    [2, '據估計，每年約有多少噸塑膠垃圾最終流入我們的海洋？', '數百萬噸', '數千噸', '數百噸', 1, '每年約有數百萬（約800萬到1100萬）噸塑膠垃圾流入海洋，這是個驚人的數字。'],

    // quiz_id 3
    [3, '什麼是造成全球漁業資源枯竭的首要原因？', '氣候變遷', '過度捕撈', '海洋污染', 2, '過度捕撈是指捕魚速度快於魚類繁殖補充的速度，這是導致全球魚類資源枯竭的主因。'],
    [3, '過度捕撈如何導致海洋生物滅絕？', '改變海水溫度', '降低族群數量使其無法恢復', '增加魚類疾病傳播', 2, '持續的過度捕撈會使魚類族群小到無法有效繁殖，最終可能導致其滅絕。'],
    [3, '哪種捕魚方式常因意外捕獲非目標物種（混獲）而加劇過度捕撈問題？', '延繩釣和拖網漁業', '徒手捕魚', '釣竿漁業', 1, '延繩釣和拖網漁業是常見的混獲來源，大量非目標生物被捕獲並丟棄，浪費資源並傷害生態。'],
    [3, '過度捕撈對海洋食物鏈有何影響？', '增強食物鏈穩定性', '導致食物鏈失衡', '增加海洋植物數量', 2, '移除頂級掠食者或關鍵物種會破壞海洋食物鏈的平衡，影響整個生態系統。'],
    [3, '「漁業補貼」可能如何加劇過度捕撈？', '鼓勵永續漁業發展', '讓漁民能投資更多捕魚設備，增加捕撈量', '減少漁業經營成本', 2, '政府補貼有時會讓 unprofitable 的捕魚活動也能持續，導致捕魚船隊規模過大，加劇資源耗盡。'],
    [3, '實施哪種管理措施能有效控制捕魚量，防止過度捕撈？', '增加捕魚船隻數量', '設定漁獲配額和禁漁期', '取消海洋保護區', 2, '漁獲配額（TACs）限制了總捕撈量，禁漁期則給予魚類繁殖恢復的時間，都是有效的管理工具。'],
    [3, '「海鮮指南」或「永續海鮮」標籤對消費者有何幫助？', '告知海鮮的烹飪方法', '幫助選擇對環境影響較小的海鮮產品', '標明海鮮的價格', 2, '這些指南或標籤能引導消費者做出更永續的選擇，減少對瀕危或過度捕撈魚種的需求。'],
    [3, '設立「海洋保護區 (MPAs)」對減緩過度捕撈有何意義？', '增加漁民捕魚範圍', '提供海洋生物安全的繁殖和成長場所', '限制遊客進入海洋', 2, 'MPAs 透過禁止或限制捕魚活動，讓魚類族群有機會恢復，並溢出到鄰近的捕魚區。'],
    [3, '提升漁業管理透明度和打擊非法、未報告、不受規範（IUU）漁業，對過度捕撈有何影響？', '對漁業無實質影響', '有效減少違法捕撈，保護漁業資源', '增加合法捕魚的成本', 2, 'IUU 漁業是過度捕撈的重大推手。加強監管和打擊能確保漁業活動符合規範，保護資源。'],
    [3, '在消費端，鼓勵食用較低食物鏈層級的魚類（如沙丁魚而非鮪魚），如何有助於應對過度捕撈？', '增加對高價魚類的需求', '減輕對頂級掠食者魚類的捕撈壓力', '鼓勵養殖漁業發展', 2, '食用食物鏈較低的魚類有助於減輕對大型、長壽、繁殖慢的頂級掠食者（常是過度捕撈的目標）的壓力，促進海洋生態平衡。'],
    
    // quiz_id 4
    [4, '哪項是海洋棲地破壞（如珊瑚礁、紅樹林、海草床）的最主要人為原因？', '自然地質變化', '沿海開發與填海造地', '深海採礦活動', 2, '沿海地區的人口增長和基礎設施開發直接導致棲地被破壞或改變，是主要的人為因素。'],
    [4, '疏浚和沿海建設（如港口、碼頭）如何直接破壞海洋棲地？', '增加海水鹽度，不利生物生存', '物理性破壞海底結構和生物群落', '引入外來物種改變生態系統', 2, '這些活動直接挖除或覆蓋海底地形，徹底毀滅了珊瑚、海草等固定的棲地。'],
    [4, '陸地上的森林砍伐和不當土地利用，如何間接導致海洋棲地破壞？', '減少海水溫度，影響海洋生物', '增加陸源沉積物和污染物徑流入海', '吸引更多海洋生物靠近海岸線', 2, '森林砍伐導致土壤侵蝕，大量泥沙和污染物被沖入海洋，覆蓋或毒害沿海棲地，如珊瑚礁和海草床。'],
    [4, '珊瑚礁被稱為「海洋雨林」，最主要原因是什麼？', '它們提供大量淡水資源', '擁有極高的生物多樣性並保護海岸線', '它們能產生大量氧氣供全球使用', 2, '珊瑚礁是全球海洋生物多樣性的熱點，為無數物種提供食物和庇護，同時也是海岸線的天然屏障。'],
    [4, '紅樹林（Mangroves）生態系統面臨的主要威脅是什麼？', '深海捕撈活動的增加', '為水產養殖、農業或城市擴張而砍伐', '極低的海水溫度導致凍死', 2, '紅樹林濕地常被人類活動轉換為其他用途，這是其面積急劇縮小的主因。'],
    [4, '氣候變遷導致的哪兩種現象對全球珊瑚礁的破壞最大？', '颱風頻率減少和海平面下降', '海水溫度升高導致白化和海洋酸化', '海洋深層水湧升和鹽度降低', 2, '海水暖化會導致珊瑚白化，而吸收二氧化碳導致的海洋酸化則削弱珊瑚骨骼的生長，兩者是珊瑚礁最大的氣候威脅。'],
    [4, '海草床在海洋生態系統中扮演什麼重要角色？', '作為主要的捕食者棲地', '作為幼魚和無脊椎動物的育兒所與重要的碳匯', '促進石油分解和清潔海洋', 2, '海草床是許多海洋生物的孵化和成長場所，同時能有效吸收二氧化碳，對減緩氣候變遷有重要貢獻。'],
    [4, '除營養過剩外，工業廢水、農藥和塑膠微粒等污染如何直接破壞海洋棲地？', '使水質變得清澈透明，提高能見度', '引入有毒物質，直接毒害生物或改變棲地物理化學結構', '增加水下植物的生長速度', 2, '有毒化學物質會直接毒害棲地中的生物，並在環境中累積，使棲地不再適合生存。塑膠微粒則造成物理性破壞和污染傳播。'],
    [4, '哪項措施是保護和恢復受損海洋棲地最有效的方法之一？', '大規模引進外來入侵物種', '建立海洋保護區（MPAs）和實施棲地復育計畫', '完全禁止所有海洋觀光活動', 2, '海洋保護區（MPAs）能為棲地提供保護，使其自然恢復；而主動的棲地復育計畫（如種植紅樹林或恢復珊瑚）則加速生態系統重建。'],
    [4, '什麼因素是驅動沿海棲地退化和破壞的根本原因之一，因為它直接增加了對海岸空間的需求？', '全球海平面下降', '沿海地區人口增長和基礎設施擴建', '月球引力對潮汐的影響', 2, '隨著沿海地區人口的增加，對住房、旅遊、工業和交通等基礎設施的需求也隨之增加，直接導致了沿海棲地的開發和破壞。']
];

// 初始化計數器
$success_count = 0;
$fail_count = 0;

// 迴圈遍歷資料並執行插入
foreach ($questions as $question) {
    // 解構陣列，並對所有字串資料進行轉義
    list($quiz_id, $question_description, $option_1, $option_2, $option_3, $answer, $explanation) = $question;
    
    // 進行字串轉義，確保安全
    $question_description = $mysqli->real_escape_string($question_description);
    $option_1 = $mysqli->real_escape_string($option_1);
    $option_2 = $mysqli->real_escape_string($option_2);
    $option_3 = $mysqli->real_escape_string($option_3);
    $explanation = $mysqli->real_escape_string($explanation);

    // 構建 SQL 查詢字串
    $sql = "INSERT INTO questions (quiz_id, question_description, option_1, option_2, option_3, answer, explanation) VALUES ($quiz_id, '$question_description', '$option_1', '$option_2', '$option_3', $answer, '$explanation')";

    // 執行查詢
    if ($mysqli->query($sql) === TRUE) {
        $success_count++;
    } else {
        $fail_count++;
        echo "Error inserting question: " . $mysqli->error . "<br>";
    }
}

echo "插入完成：成功 $success_count 筆，失敗 $fail_count 筆。<br>";

// 關閉連線
$mysqli->close();
?>